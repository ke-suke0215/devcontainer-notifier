# Dev Container Notification Server

é–‹ç™ºã‚³ãƒ³ãƒ†ãƒŠï¼ˆDev Containerï¼‰ã‹ã‚‰ãƒ›ã‚¹ãƒˆã® macOS ã«é€šçŸ¥ã‚’é€ä¿¡ã™ã‚‹ãŸã‚ã®ã‚·ãƒ³ãƒ—ãƒ«ãª HTTP ã‚µãƒ¼ãƒãƒ¼ã§ã™ã€‚Claude Code ã‚„ãã®ä»–ã®é–‹ç™ºãƒ„ãƒ¼ãƒ«ã‚’ä¸¦åˆ—ã§å®Ÿè¡Œã™ã‚‹éš›ã«ã€ä½œæ¥­ã®å®Œäº†ã‚’é€šçŸ¥ã§å—ã‘å–ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

## ğŸ¯ ç”¨é€”

- **é–‹ç™ºã‚³ãƒ³ãƒ†ãƒŠã‹ã‚‰ã®é€šçŸ¥**: Docker ã‚³ãƒ³ãƒ†ãƒŠå†…ã‹ã‚‰ãƒ›ã‚¹ãƒˆãƒã‚·ãƒ³ã«é€šçŸ¥ã‚’é€ä¿¡
- **ä¸¦åˆ—é–‹ç™ºä½œæ¥­**: è¤‡æ•°ã® Claude Code ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚„é–‹ç™ºã‚¿ã‚¹ã‚¯ã®å®Œäº†é€šçŸ¥
- **é•·æ™‚é–“å‡¦ç†ã®å®Œäº†é€šçŸ¥**: ãƒ“ãƒ«ãƒ‰ã‚„ãƒ†ã‚¹ãƒˆå®Ÿè¡Œã®å®Œäº†ã‚’ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—é€šçŸ¥ã§ç¢ºèª

## ğŸ“‹ å¿…è¦ãªç’°å¢ƒ

- **macOS** (terminal-notifier ã‚’ä½¿ç”¨)
- **Node.js** (v12 ä»¥ä¸Šæ¨å¥¨)
- **terminal-notifier** (Homebrew ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«)

## ğŸš€ ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### 1. terminal-notifier ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
brew install terminal-notifier
```

### 2. macOS é€šçŸ¥è¨±å¯ã®è¨­å®š

> **æ³¨æ„**: terminal-notifier ãŒåˆå›å®Ÿè¡Œæ™‚ã«é€šçŸ¥è¨±å¯ã‚’æ±‚ã‚ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚é€šçŸ¥ãŒè¡¨ç¤ºã•ã‚Œãªã„å ´åˆã¯ã€macOS ã®ã‚·ã‚¹ãƒ†ãƒ è¨­å®šã‹ã‚‰ terminal-notifier ã®é€šçŸ¥è¨±å¯ã‚’æœ‰åŠ¹ã«ã—ã¦ãã ã•ã„ã€‚

### 3. ã‚µãƒ¼ãƒãƒ¼ã®èµ·å‹•

```bash
node server.js
```

ã‚µãƒ¼ãƒãƒ¼ãŒèµ·å‹•ã™ã‚‹ã¨ä»¥ä¸‹ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ï¼š

```
é€šçŸ¥ã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•: http://localhost:37842
```

## ğŸ“¡ ä½¿ç”¨æ–¹æ³•

### åŸºæœ¬çš„ãªé€šçŸ¥é€ä¿¡

```bash
curl -s -X POST http://localhost:37842/notify \
  -H "Content-Type: application/json" \
  -d '{"title": "ä½œæ¥­å®Œäº†", "message": "ãƒ“ãƒ«ãƒ‰ãŒå®Œäº†ã—ã¾ã—ãŸ"}'
```

### Container å†…ã‹ã‚‰ã®ä½¿ç”¨ä¾‹

```bash
# ãƒ“ãƒ«ãƒ‰å®Œäº†å¾Œã«é€šçŸ¥
npm run build && curl -s -X POST http://host.docker.internal:37842/notify \
  -H "Content-Type: application/json" \
  -d '{"title": "Build Complete", "message": "ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ“ãƒ«ãƒ‰ãŒå®Œäº†ã—ã¾ã—ãŸ"}'
```

### JavaScript ã‹ã‚‰ã®ä½¿ç”¨ä¾‹

```javascript
async function sendNotification(title, message) {
  try {
    const response = await fetch("http://localhost:37842/notify", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
      },
      body: JSON.stringify({ title, message }),
    });

    const result = await response.json();
    console.log("é€šçŸ¥é€ä¿¡:", result);
  } catch (error) {
    console.error("é€šçŸ¥ã‚¨ãƒ©ãƒ¼:", error);
  }
}

// ä½¿ç”¨ä¾‹
sendNotification("ãƒ†ã‚¹ãƒˆå®Œäº†", "ã™ã¹ã¦ã®ãƒ†ã‚¹ãƒˆãŒæ­£å¸¸ã«å®Œäº†ã—ã¾ã—ãŸ");
```

## ğŸ”§ API ä»•æ§˜

### ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

- **URL**: `http://localhost:37842/notify`
- **ãƒ¡ã‚½ãƒƒãƒ‰**: `POST`
- **Content-Type**: `application/json`

### ãƒªã‚¯ã‚¨ã‚¹ãƒˆå½¢å¼

```json
{
  "title": "é€šçŸ¥ã®ã‚¿ã‚¤ãƒˆãƒ«ï¼ˆçœç•¥å¯ï¼‰",
  "message": "é€šçŸ¥ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼ˆçœç•¥å¯ï¼‰"
}
```

### ãƒ¬ã‚¹ãƒãƒ³ã‚¹å½¢å¼

**æˆåŠŸæ™‚:**

```json
{
  "status": "success",
  "message": "Notification sent"
}
```

**ã‚¨ãƒ©ãƒ¼æ™‚:**

```json
{
  "status": "error",
  "message": "Invalid JSON"
}
```

## ğŸ› ï¸ ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º

### ãƒãƒ¼ãƒˆç•ªå·ã®å¤‰æ›´

`server.js`ã® 54 è¡Œç›®ã‚’ç·¨é›†ï¼š

```javascript
const PORT = 37842; // ä»»æ„ã®ãƒãƒ¼ãƒˆç•ªå·ã«å¤‰æ›´
```

## ğŸ”’ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ³¨æ„äº‹é …

- ã“ã®ã‚µãƒ¼ãƒãƒ¼ã¯é–‹ç™ºç’°å¢ƒã§ã®ä½¿ç”¨ã‚’æƒ³å®šã—ã¦ãŠã‚Šã€æœ¬ç•ªç’°å¢ƒã§ã®ä½¿ç”¨ã¯æ¨å¥¨ã•ã‚Œã¾ã›ã‚“
- å¤–éƒ¨ã‹ã‚‰ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚’åˆ¶é™ã—ãŸã„å ´åˆã¯ã€ãƒ•ã‚¡ã‚¤ã‚¢ã‚¦ã‚©ãƒ¼ãƒ«è¨­å®šã‚’ç¢ºèªã—ã¦ãã ã•ã„

## ğŸ“ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

MIT License

## ğŸ¤ è²¢çŒ®

ãƒã‚°å ±å‘Šã‚„æ©Ÿèƒ½è¦æœ›ã¯ Issues ã§ãŠçŸ¥ã‚‰ã›ãã ã•ã„ã€‚ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚‚æ­“è¿ã—ã¾ã™ã€‚
